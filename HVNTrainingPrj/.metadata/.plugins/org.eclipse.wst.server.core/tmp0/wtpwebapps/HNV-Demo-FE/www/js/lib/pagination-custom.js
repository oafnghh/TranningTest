!function(a,e){void 0===e&&n("Pagination requires jQuery.");var t="pagination",i="__pagination-";e.fn.pagination&&(t="pagination2"),e.fn[t]=function(r){if(void 0===r)return this;var s,l=e(this),c=e.extend({},e.fn[t].defaults,r);if(l.data("pagination")&&!0===l.data("pagination").initialized){if(e.isNumeric(r))return l.trigger.call(this,i+"go",r,arguments[1]),this;if("string"==typeof r){var u,g=Array.prototype.slice.apply(arguments);switch(g[0]=i+g[0],r){case"previous":case"next":case"go":case"disable":case"enable":case"refresh":case"show":case"hide":case"destroy":l.trigger.apply(this,g);break;case"getSelectedPageNum":if(l.data("pagination").model)return l.data("pagination").model.pageNumber;return l.data("pagination").attributes.pageNumber;case"getTotalPage":return Math.ceil(l.data("pagination").model.totalNumber/l.data("pagination").model.pageSize);case"getSelectedPageData":return l.data("pagination").currentPageData;case"isDisabled":return!0===l.data("pagination").model.disabled;default:n("Unknown action: "+r)}return this}u=l,e.each(["go","previous","next","disable","enable","refresh","show","hide","destroy"],function(a,e){u.off(i+e)}),u.data("pagination",{}),e(".paginationjs",u).remove()}else o.isObject(r)||n("Illegal options");return(s=c).dataSource||n('"dataSource" is required.'),"string"==typeof s.dataSource?void 0===s.totalNumberLocator?void 0===s.totalNumber?n('"totalNumber" is required.'):e.isNumeric(s.totalNumber)||n('"totalNumber" is incorrect. (Number)'):e.isFunction(s.totalNumberLocator)||n('"totalNumberLocator" should be a Function.'):o.isObject(s.dataSource)&&(void 0===s.locator?n('"dataSource" is an Object, please specify "locator".'):"string"==typeof s.locator||e.isFunction(s.locator)||n(""+s.locator+" is incorrect. (String | Function)")),void 0===s.formatResult||e.isFunction(s.formatResult)||n('"formatResult" should be a Function.'),({initialize:function(){var a=this;if(l.data("pagination")||l.data("pagination",{}),!1!==a.callHook("beforeInit")){l.data("pagination").initialized&&e(".paginationjs",l).remove(),a.disabled=!!c.disabled;var t=a.model={pageRange:c.pageRange,pageSize:c.pageSize,totalNumber:c.totalNumber};a.parseDataSource(c.dataSource,function(e){if(a.isAsync=o.isString(e),c.isNoAjax?o.isArray(e)&&(t.totalNumber=c.totalNumber):o.isArray(e)&&(t.totalNumber=c.totalNumber=e.length),a.isDynamicTotalNumber=a.isAsync&&c.totalNumberLocator,!(c.hideWhenLessThanOnePage&&1>=a.getTotalPage())){var i=a.render(!0);c.className&&i.addClass(c.className),t.el=i,l["bottom"===c.position?"append":"prepend"](i),a.observer(),l.data("pagination").initialized=!0,a.callHook("afterInit",i)}})}},render:function(a){var t=this.model,i=t.el||e('<div class="paginationjs"></div>'),o=!0!==a;this.callHook("beforeRender",o);var n=t.pageNumber||c.pageNumber,r=c.pageRange,s=this.getTotalPage(),l=n-r,u=n+r;return u>s&&(u=s,l=(l=s-2*r)<1?1:l),l<=1&&(l=1,u=Math.min(2*r+1,s)),i.html(this.generateHTML({currentPage:n,pageRange:r,rangeStart:l,rangeEnd:u})),this.callHook("afterRender",o),i},generateHTML:function(a){var t,i,o=a.currentPage,n=this.getTotalPage(),r=a.rangeStart,s=a.rangeEnd,l=this.getTotalNumber(),u=c.showPrevious,g=c.showNext,d=c.showPageNumbers,p=c.showNavigator,f=c.showGoInput,m=c.showGoButton,h=c.pageLink,b=c.prevText,v=c.nextText,N=c.ellipsisText,y=c.goButtonText,_=c.classPrefix,k=c.activeClassName,P=c.disableClassName,j=c.ulClassName,x="",S='<input type="text" class="J-paginationjs-go-pagenumber">',T='<input type="button" class="J-paginationjs-go-button" value="'+y+'">',C=e.isFunction(c.formatNavigator)?c.formatNavigator(o,n,l):c.formatNavigator,H=e.isFunction(c.formatGoInput)?c.formatGoInput(S,o,n,l):c.formatGoInput,w=e.isFunction(c.formatGoButton)?c.formatGoButton(T,o,n,l):c.formatGoButton,$=e.isFunction(c.autoHidePrevious)?c.autoHidePrevious():c.autoHidePrevious,F=e.isFunction(c.autoHideNext)?c.autoHideNext():c.autoHideNext,O=e.isFunction(c.header)?c.header(o,n,l):c.header,D=e.isFunction(c.footer)?c.footer(o,n,l):c.footer;if(O&&(x+=t=this.replaceVariables(O,{currentPage:o,totalPage:n,totalNumber:l})),u||d||g){if(x+='<div class="paginationjs-pages">',j?x+='<ul class="'+j+'">':x+="<ul>",u&&(o<=1?$||(x+='<li class="'+_+"-prev "+P+'"><a>'+b+"</a></li>"):x+='<li class="'+_+'-prev J-paginationjs-previous" data-num="'+(o-1)+'" title="Previous page"><a href="'+h+'">'+b+"</a></li>"),d){if(r<=3)for(i=1;i<r;i++)i==o?x+='<li class="'+_+"-page J-paginationjs-page "+k+'" data-num="'+i+'"><a>'+i+"</a></li>":x+='<li class="'+_+'-page J-paginationjs-page" data-num="'+i+'"><a href="'+h+'">'+i+"</a></li>";else c.showFirstOnEllipsisShow&&(x+='<li class="'+_+"-page "+_+'-first J-paginationjs-page" data-num="1"><a href="'+h+'">1</a></li>'),x+='<li class="'+_+"-ellipsis "+P+'"><a>'+N+"</a></li>";for(i=r;i<=s;i++)i==o?x+='<li class="'+_+"-page J-paginationjs-page "+k+'" data-num="'+i+'"><a>'+i+"</a></li>":x+='<li class="'+_+'-page J-paginationjs-page" data-num="'+i+'"><a href="'+h+'">'+i+"</a></li>";if(s>=n-2)for(i=s+1;i<=n;i++)x+='<li class="'+_+'-page J-paginationjs-page" data-num="'+i+'"><a href="'+h+'">'+i+"</a></li>";else x+='<li class="'+_+"-ellipsis "+P+'"><a>'+N+"</a></li>",c.showLastOnEllipsisShow&&(x+='<li class="'+_+"-page "+_+'-last J-paginationjs-page" data-num="'+n+'"><a href="'+h+'">'+n+"</a></li>")}g&&(o>=n?F||(x+='<li class="'+_+"-next "+P+'"><a>'+v+"</a></li>"):x+='<li class="'+_+'-next J-paginationjs-next" data-num="'+(o+1)+'" title="Next page"><a href="'+h+'">'+v+"</a></li>"),x+="</ul></div>",App.data.beginPagination=a.currentPage}return p&&C&&(x+='<div class="'+_+'-nav J-paginationjs-nav">'+(t=this.replaceVariables(C,{currentPage:o,totalPage:n,totalNumber:l}))+"</div>"),f&&H&&(x+='<div class="'+_+'-go-input">'+(t=this.replaceVariables(H,{currentPage:o,totalPage:n,totalNumber:l,input:S}))+"</div>"),m&&w&&(x+='<div class="'+_+'-go-button">'+(t=this.replaceVariables(w,{currentPage:o,totalPage:n,totalNumber:l,button:T}))+"</div>"),D&&(x+=t=this.replaceVariables(D,{currentPage:o,totalPage:n,totalNumber:l})),x},findTotalNumberFromRemoteResponse:function(a){var e=this;e.model.totalNumber=c.totalNumberLocator(a)},go:function(a,t){var i=this,n=i.model;if(!i.disabled){var r=a;if((r=parseInt(r))&&!(r<1)){var s=c.pageSize,u=i.getTotalNumber(),g=i.getTotalPage();if(u>0&&r>g)return;if(!i.isAsync){b(i.getDataFragment(r));return}var d={},p=c.alias||{};d[p.pageSize?p.pageSize:"pageSize"]=s,d[p.pageNumber?p.pageNumber:"pageNumber"]=r;var f=e.isFunction(c.ajax)?c.ajax():c.ajax?c.ajax:{},m={type:"get",cache:!1,data:{},contentType:"application/json; charset=UTF-8",dataType:"json",async:!0,url:c.dataSource,success:function(a){i.isDynamicTotalNumber?(App.network.decodeUTF8(a),App.const.RES_DATA,a[App.const.SV_CODE]==App.const.SV_CODE_API_YES?(i.findTotalNumberFromRemoteResponse(a),i.model.dataCache[r-1]=a):a[App.const.SV_CODE]==App.const.SV_CODE_API_NO&&i.hide(),b(a)):(i.model.totalNumber=c.totalNumber,b(i.filterDataByLocator(a)))},error:function(a,e,t){c.formatAjaxError&&c.formatAjaxError(a,e,t),i.enable()}};e.extend(!0,m,f),e.extend(m.data,d),m.data.begin=(r-1)*s,m.data.number=s,m.data.total=u,i.disable();var h=i.getDataCache(r-1);h?(console.log("---render from cache pageNumber ---"+r),b(h)):(console.log("---call ajax pageNumber ---"+r),m.data=JSON.stringify(m.data),e.ajax(m))}}function b(a){if(!1===i.callHook("beforePaging",r))return!1;if(n.direction=void 0===n.pageNumber?0:r>n.pageNumber?1:-1,n.pageNumber=r,i.render(),i.disabled&&i.isAsync&&i.enable(),l.data("pagination").model=n,c.formatResult){var s=e.extend(!0,[],a);o.isArray(a=c.formatResult(s))||(a=s)}l.data("pagination").currentPageData=a,i.doCallback(a,t),i.callHook("afterPaging",r),1==r&&i.callHook("afterIsFirstPage"),r==i.getTotalPage()&&i.callHook("afterIsLastPage")}},doCallback:function(a,t){var i=this.model;e.isFunction(t)?t(a,i):e.isFunction(c.callback)&&c.callback(a,i)},destroy:function(){!1!==this.callHook("beforeDestroy")&&(this.model.el.remove(),l.off(),e("#paginationjs-style").remove(),this.callHook("afterDestroy"))},previous:function(a){this.go(this.model.pageNumber-1,a)},next:function(a){this.go(this.model.pageNumber+1,a)},disable:function(){var a=this,e=a.isAsync?"async":"sync";!1!==a.callHook("beforeDisable",e)&&(a.disabled=!0,a.model.disabled=!0,a.callHook("afterDisable",e))},enable:function(){var a=this,e=a.isAsync?"async":"sync";!1!==a.callHook("beforeEnable",e)&&(a.disabled=!1,a.model.disabled=!1,a.callHook("afterEnable",e))},refresh:function(a){this.go(this.model.pageNumber,a)},show:function(){this.model.el.is(":visible")||this.model.el.show()},hide:function(){this.model.el.is(":visible")&&this.model.el.hide()},replaceVariables:function(a,e){var t;for(var i in e){var o=e[i],n=RegExp("<%=\\s*"+i+"\\s*%>","img");t=(t||a).replace(n,o)}return t},getDataFragment:function(a){var e=c.pageSize,t=c.dataSource,i=this.getTotalNumber();return t.slice(e*(a-1)+1-1,Math.min(a*e,i))},getTotalNumber:function(){return this.model.totalNumber||c.totalNumber||0},getTotalPage:function(){return Math.ceil(this.getTotalNumber()/c.pageSize)},getDataCache:function(a){this.model.dataCache||(this.model.dataCache={});var e=this.model.dataCache[a];return this.model.dataCache.length>100&&(this.model.dataCache={}),e},getLocator:function(a){var t;return"string"==typeof a?t=a:e.isFunction(a)?t=a():n('"locator" is incorrect. (String | Function)'),t},filterDataByLocator:function(a){var t,i=this.getLocator(c.locator);if(o.isObject(a)){try{e.each(i.split("."),function(e,i){t=(t||a)[i]})}catch(r){}t?o.isArray(t)||n("dataSource."+i+" must be an Array."):n("dataSource."+i+" is undefined.")}return t||a},parseDataSource:function(a,t){var i=this;o.isObject(a)?t(c.dataSource=i.filterDataByLocator(a)):o.isArray(a)?t(c.dataSource=a):e.isFunction(a)?c.dataSource(function(a){o.isArray(a)||n('The parameter of "done" Function should be an Array.'),i.parseDataSource.call(i,a,t)}):"string"==typeof a?(/^https?|file:/.test(a)&&(c.ajaxDataType="jsonp"),t(a)):n('Unexpected type of "dataSource".')},callHook:function(t){var i,o=l.data("pagination"),n=Array.prototype.slice.apply(arguments);return n.shift(),c[t]&&e.isFunction(c[t])&&!1===c[t].apply(a,n)&&(i=!1),o.hooks&&o.hooks[t]&&e.each(o.hooks[t],function(e,t){!1===t.apply(a,n)&&(i=!1)}),!1!==i},observer:function(){var a=this,t=a.model.el;l.on(i+"go",function(t,i,o){(i=parseInt(e.trim(i)))&&(e.isNumeric(i)||n('"pageNumber" is incorrect. (Number)'),a.go(i,o))}),t.delegate(".J-paginationjs-page","click",function(t){var i=e(t.currentTarget),o=e.trim(i.attr("data-num"));if(!(!o||i.hasClass(c.disableClassName)||i.hasClass(c.activeClassName))&&(!1===a.callHook("beforePageOnClick",t,o)||(a.go(o),a.callHook("afterPageOnClick",t,o),!c.pageLink)))return!1}),t.delegate(".J-paginationjs-previous","click",function(t){var i=e(t.currentTarget),o=e.trim(i.attr("data-num"));if(!(!o||i.hasClass(c.disableClassName))&&(!1===a.callHook("beforePreviousOnClick",t,o)||(a.go(o),a.callHook("afterPreviousOnClick",t,o),!c.pageLink)))return!1}),t.delegate(".J-paginationjs-next","click",function(t){var i=e(t.currentTarget),o=e.trim(i.attr("data-num"));if(!(!o||i.hasClass(c.disableClassName))&&(!1===a.callHook("beforeNextOnClick",t,o)||(a.go(o),a.callHook("afterNextOnClick",t,o),!c.pageLink)))return!1}),t.delegate(".J-paginationjs-go-button","click",function(o){var n=e(".J-paginationjs-go-pagenumber",t).val();if(!1===a.callHook("beforeGoButtonOnClick",o,n))return!1;l.trigger(i+"go",n),a.callHook("afterGoButtonOnClick",o,n)}),t.delegate(".J-paginationjs-go-pagenumber","keyup",function(o){if(13===o.which){var n=e(o.currentTarget).val();if(!1===a.callHook("beforeGoInputOnEnter",o,n))return!1;l.trigger(i+"go",n),e(".J-paginationjs-go-pagenumber",t).focus(),a.callHook("afterGoInputOnEnter",o,n)}}),l.on(i+"previous",function(e,t){a.previous(t)}),l.on(i+"next",function(e,t){a.next(t)}),l.on(i+"disable",function(){a.disable()}),l.on(i+"enable",function(){a.enable()}),l.on(i+"refresh",function(e,t){a.refresh(t)}),l.on(i+"show",function(){a.show()}),l.on(i+"hide",function(){a.hide()}),l.on(i+"destroy",function(){a.destroy()});var o=Math.max(a.getTotalPage(),1),r=c.pageNumber;a.isDynamicTotalNumber&&(r=1),c.triggerPagingOnInit&&l.trigger(i+"go",Math.min(r,o))}}).initialize(),this},e.fn[t].defaults={dataCache:{},canAjax:!0,totalNumber:0,pageNumber:1,pageSize:10,pageRange:2,showPrevious:!0,showNext:!0,showPageNumbers:!0,showNavigator:!1,showGoInput:!1,showGoButton:!1,pageLink:"",prevText:"&laquo;",nextText:"&raquo;",ellipsisText:"...",goButtonText:"Go",classPrefix:"paginationjs",activeClassName:"active",disableClassName:"disabled",inlineStyle:!0,formatNavigator:"<%= currentPage %> / <%= totalPage %>",formatGoInput:"<%= input %>",formatGoButton:"<%= button %>",position:"bottom",autoHidePrevious:!1,autoHideNext:!1,triggerPagingOnInit:!0,hideWhenLessThanOnePage:!1,showFirstOnEllipsisShow:!0,showLastOnEllipsisShow:!0,callback:function(){}},e.fn.addHook=function(a,t){arguments.length<2&&n("Missing argument."),e.isFunction(t)||n("callback must be a function.");var i=e(this),o=i.data("pagination");o||(i.data("pagination",{}),o=i.data("pagination")),o.hooks||(o.hooks={}),o.hooks[a]=o.hooks[a]||[],o.hooks[a].push(t)},e[t]=function(a,t){var i;if(arguments.length<2&&n("Requires two parameters."),(i="string"!=typeof a&&a instanceof jQuery?a:e(a)).length)return i.pagination(t),i};var o={};function n(a){throw Error("Pagination: "+a)}e.each(["Object","Array","String"],function(a,e){o["is"+e]=function(a){var t,i;return("object"==(i=typeof(t=a))?null==t&&"null"||Object.prototype.toString.call(t).slice(8,-1):i).toLowerCase()===e.toLowerCase()}}),"function"==typeof define&&define.amd&&define(function(){return e})}(this,window.jQuery);